{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\xujia\\\\OneDrive\\\\\\u684C\\u9762\\\\MASTER - CAPSTONE 2\\\\CapStoneV4-master\\\\client\\\\src\\\\components\\\\HomePage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { debounce } from 'lodash';\nimport './HomePage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction HomePage() {\n  _s();\n  const [books, setBooks] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [suggestions, setSuggestions] = useState([]);\n  const navigate = useNavigate();\n  const GOOGLE_BOOKS_API_KEY = 'AIzaSyCFYK49GHRvjQNCIWqgIO7N-ZNiw5nzlMY';\n  useEffect(() => {\n    const fetchBooks = async () => {\n      try {\n        const response = await axios.get('http://localhost:5000/api/books');\n        setBooks(response.data);\n      } catch (error) {\n        console.error('Error fetching books:', error);\n      }\n    };\n    fetchBooks();\n  }, []);\n  const debouncedFetchSuggestions = debounce(async term => {\n    if (term.length > 0) {\n      try {\n        const response = await fetch(`https://www.googleapis.com/books/v1/volumes?q=${term}&maxResults=5&key=${GOOGLE_BOOKS_API_KEY}`);\n        const data = await response.json();\n        setSuggestions(data.items || []);\n      } catch (error) {\n        console.error('Error fetching suggestions:', error);\n      }\n    } else {\n      setSuggestions([]);\n    }\n  }, 300);\n  useEffect(() => {\n    debouncedFetchSuggestions(searchTerm);\n    return () => debouncedFetchSuggestions.cancel();\n  }, [searchTerm, debouncedFetchSuggestions]);\n  const handleSearch = async e => {\n    e.preventDefault();\n    if (!searchTerm) {\n      alert('Please enter a search term.');\n      return;\n    }\n    try {\n      const response = await fetch(`https://www.googleapis.com/books/v1/volumes?q=${searchTerm}&key=${GOOGLE_BOOKS_API_KEY}`);\n      const data = await response.json();\n      if (data.items && data.items.length > 0) {\n        setBooks(data.items);\n        navigate(`/book/${data.items[0].id}`);\n      } else {\n        alert('No book found with that title.');\n      }\n    } catch (error) {\n      console.error('Error fetching data from Google Books API:', error);\n      alert('There was an error searching for the book. Please try again later.');\n    }\n  };\n  const handleSelectSuggestion = book => {\n    setSearchTerm(book.volumeInfo.title);\n    setSuggestions([]);\n    navigate(`/book/${book.id}`);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"home-page\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      class: \"title-list\",\n      children: \"Book List\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-bar-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSearch,\n        className: \"search-bar\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Search for a book...\",\n          value: searchTerm,\n          onChange: e => setSearchTerm(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), suggestions.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: `suggestions-dropdown ${suggestions.length > 0 ? 'show' : ''}`,\n        children: suggestions.map(book => /*#__PURE__*/_jsxDEV(\"li\", {\n          onClick: () => handleSelectSuggestion(book),\n          className: \"suggestion-item\",\n          children: book.volumeInfo.title\n        }, book.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"book-grid\",\n      children: books.length > 0 ? books.map(book => {\n        var _book$volumeInfo$imag, _book$volumeInfo$auth;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"book-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: (_book$volumeInfo$imag = book.volumeInfo.imageLinks) === null || _book$volumeInfo$imag === void 0 ? void 0 : _book$volumeInfo$imag.thumbnail,\n            alt: book.volumeInfo.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: book.volumeInfo.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: (_book$volumeInfo$auth = book.volumeInfo.authors) === null || _book$volumeInfo$auth === void 0 ? void 0 : _book$volumeInfo$auth.join(', ')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: `/book/${book.id}`,\n            className: \"view-details-btn\",\n            children: \"View Details\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 15\n          }, this)]\n        }, book.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this);\n      }) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No books found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n_s(HomePage, \"hejeZCCudLA3xaE3t3kGWapu9sQ=\", false, function () {\n  return [useNavigate];\n});\n_c = HomePage;\nexport default HomePage;\nvar _c;\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["React","useState","useEffect","axios","Link","useNavigate","debounce","jsxDEV","_jsxDEV","HomePage","_s","books","setBooks","searchTerm","setSearchTerm","suggestions","setSuggestions","navigate","GOOGLE_BOOKS_API_KEY","fetchBooks","response","get","data","error","console","debouncedFetchSuggestions","term","length","fetch","json","items","cancel","handleSearch","e","preventDefault","alert","id","handleSelectSuggestion","book","volumeInfo","title","className","children","class","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","placeholder","value","onChange","target","map","onClick","_book$volumeInfo$imag","_book$volumeInfo$auth","src","imageLinks","thumbnail","alt","authors","join","to","_c","$RefreshReg$"],"sources":["C:/Users/xujia/OneDrive/桌面/MASTER - CAPSTONE 2/CapStoneV4-master/client/src/components/HomePage.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport axios from 'axios';\nimport {Link, useNavigate} from 'react-router-dom';\nimport {debounce} from 'lodash';\nimport './HomePage.css';\n\nfunction HomePage() {\n  const [books, setBooks] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [suggestions, setSuggestions] = useState([]);\n  const navigate = useNavigate();\n\n  const GOOGLE_BOOKS_API_KEY='AIzaSyCFYK49GHRvjQNCIWqgIO7N-ZNiw5nzlMY';\n\n  useEffect(() => {\n    const fetchBooks = async () => {\n      try {\n        const response = await axios.get('http://localhost:5000/api/books');\n        setBooks(response.data);\n      } catch (error) {\n        console.error('Error fetching books:', error);\n      }\n    };\n\n    fetchBooks();\n  }, []);\n\n  const debouncedFetchSuggestions=debounce(async (term) => {\n    if (term.length > 0) {\n      try {\n        const response=await fetch(\n          `https://www.googleapis.com/books/v1/volumes?q=${term}&maxResults=5&key=${GOOGLE_BOOKS_API_KEY}`\n        );\n        const data=await response.json();\n        setSuggestions(data.items || []);\n      } catch (error) {\n        console.error('Error fetching suggestions:', error);\n      }\n    } else {\n      setSuggestions([]);\n    }\n  }, 300);\n\n  useEffect(() => {\n    debouncedFetchSuggestions(searchTerm);\n    return () => debouncedFetchSuggestions.cancel();\n  }, [searchTerm, debouncedFetchSuggestions]);\n\n  const handleSearch=async (e) => {\n    e.preventDefault();\n\n    if (!searchTerm) {\n      alert('Please enter a search term.');\n      return;\n    }\n\n    try {\n      const response=await fetch(\n        `https://www.googleapis.com/books/v1/volumes?q=${searchTerm}&key=${GOOGLE_BOOKS_API_KEY}`\n      );\n      const data=await response.json();\n\n      if (data.items && data.items.length > 0) {\n        setBooks(data.items);\n        navigate(`/book/${data.items[0].id}`);\n      } else {\n        alert('No book found with that title.');\n      }\n    } catch (error) {\n      console.error('Error fetching data from Google Books API:', error);\n      alert('There was an error searching for the book. Please try again later.');\n    }\n  };\n\n  const handleSelectSuggestion=(book) => {\n    setSearchTerm(book.volumeInfo.title);\n    setSuggestions([]);\n    navigate(`/book/${book.id}`);\n  };\n\n  return (\n    <div className=\"home-page\">\n      <h1 class=\"title-list\">Book List</h1>\n      <div className=\"search-bar-container\">\n        <form onSubmit={handleSearch} className=\"search-bar\">\n          <input\n            type=\"text\"\n            placeholder=\"Search for a book...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n          />\n          <button type=\"submit\">Search</button>\n        </form>\n        {suggestions.length > 0 && (\n          <ul className={`suggestions-dropdown ${suggestions.length > 0 ? 'show' : ''}`}>\n            {suggestions.map((book) => (\n              <li\n                key={book.id}\n                onClick={() => handleSelectSuggestion(book)}\n                className=\"suggestion-item\"\n              >\n                {book.volumeInfo.title}\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n      <div className=\"book-grid\">\n        {books.length > 0 ? (\n          books.map((book) => (\n            <div key={book.id} className=\"book-card\">\n              <img src={book.volumeInfo.imageLinks?.thumbnail} alt={book.volumeInfo.title} />\n              <h3>{book.volumeInfo.title}</h3>\n              <p>{book.volumeInfo.authors?.join(', ')}</p>\n              <Link to={`/book/${book.id}`} className=\"view-details-btn\">View Details</Link>\n            </div>\n          ))\n        ) : (\n          <p>No books found.</p>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default HomePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}